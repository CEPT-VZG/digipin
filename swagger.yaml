openapi: 3.0.0
info:
  title: DIGIPIN API
  description: Encode and decode DIGIPIN based on latitude and longitude
  version: 1.0.0
servers:
  - url: http://localhost:5000/api

paths:
  /digipin/encode:
    post:
      summary: Encode coordinates into DIGIPIN
      description: |
        Encode coordinates into DIGIPIN format. Supports multiple coordinate formats:
        - Decimal degrees (Google Maps format)
        - Degrees Minutes Seconds (DMS) format
        - Google Maps coordinate string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              oneOf:
                - type: object
                  properties:
                    coordinates:
                      type: string
                      description: Google Maps coordinate string format
                      example: "12.903016468272682, 77.60606960542954"
                  required: [coordinates]
                - type: object
                  properties:
                    latitude:
                      oneOf:
                        - type: number
                          description: Decimal degrees
                          example: 12.903016
                        - type: string
                          description: DMS format
                          example: "12째54'10.3\"N"
                    longitude:
                      oneOf:
                        - type: number
                          description: Decimal degrees
                          example: 77.606069
                        - type: string
                          description: DMS format
                          example: "77째36'22.3\"E"
                  required: [latitude, longitude]
      responses:
        '200':
          description: Successfully encoded DIGIPIN
          content:
            application/json:
              schema:
                type: object
                properties:
                  digipin:
                    type: string
                    description: The generated DIGIPIN code
                    example: "4P3-KCF-77M4"
                  input:
                    type: object
                    description: The parsed input coordinates in decimal degrees
                    properties:
                      latitude:
                        type: number
                        example: 12.903016468272682
                      longitude:
                        type: number
                        example: 77.60606960542954
        '400':
          description: Invalid input
    get:
      summary: Encode coordinates into DIGIPIN via query parameters
      description: |
        Encode coordinates into DIGIPIN format using query parameters. Supports multiple coordinate formats:
        - Decimal degrees
        - Degrees Minutes Seconds (DMS) format
        - Google Maps coordinate string
      parameters:
        - in: query
          name: coordinates
          required: false
          schema:
            type: string
          description: Google Maps coordinate string format (e.g., "12.903016468272682,77.60606960542954")
          example: "12.903016468272682,77.60606960542954"
        - in: query
          name: latitude
          required: false
          schema:
            oneOf:
              - type: number
              - type: string
          description: Latitude in decimal degrees or DMS format
          examples:
            decimal:
              value: 12.903016
              summary: Decimal degrees
            dms:
              value: "12째54'10.3\"N"
              summary: DMS format
        - in: query
          name: longitude
          required: false
          schema:
            oneOf:
              - type: number
              - type: string
          description: Longitude in decimal degrees or DMS format
          examples:
            decimal:
              value: 77.606069
              summary: Decimal degrees
            dms:
              value: "77째36'22.3\"E"
              summary: DMS format
      responses:
        '200':
          description: Successfully encoded DIGIPIN
          content:
            application/json:
              schema:
                type: object
                properties:
                  digipin:
                    type: string
                    description: The generated DIGIPIN code
                    example: "4P3-KCF-77M4"
                  input:
                    type: object
                    description: The parsed input coordinates in decimal degrees
                    properties:
                      latitude:
                        type: number
                        example: 12.903016468272682
                      longitude:
                        type: number
                        example: 77.60606960542954
        '400':
          description: Invalid input or missing required parameters
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    description: Error message describing the issue
                  examples:
                    type: object
                    description: Examples of valid coordinate formats

  /digipin/decode:
    post:
      summary: Decode DIGIPIN to coordinates
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                digipin:
                  type: string
      responses:
        '200':
          description: Successfully decoded DIGIPIN
          content:
            application/json:
              schema:
                type: object
                properties:
                  latitude:
                    type: number
                  longitude:
                    type: number
        '400':
          description: Invalid DIGIPIN
    get:
      summary: Decode DIGIPIN to coordinates
      parameters:
        - in: query
          name: digipin
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Successfully decoded DIGIPIN
          content:
            application/json:
              schema:
                type: object
                properties:
                  latitude:
                    type: number
                  longitude:
                    type: number
        '400':
          description: Invalid DIGIPIN
